/**
 * jQuery Masonry v2.1.08
 * A dynamic layout plugin for jQuery
 * The flip-side of CSS Floats
 * http://masonry.desandro.com
 *
 * Licensed under the MIT license.
 * Copyright 2012 David DeSandro
 */

(function(c,d,e){var a=d.event,b;a.special.smartresize={setup:function(){d(this).bind("resize",a.special.smartresize.handler)},teardown:function(){d(this).unbind("resize",a.special.smartresize.handler)},handler:function(j,g){var i=this,h=arguments;j.type="smartresize";if(b){clearTimeout(b)}b=setTimeout(function(){a.dispatch.apply(i,h)},g==="execAsap"?0:100)}};d.fn.smartresize=function(g){return g?this.bind("smartresize",g):this.trigger("smartresize",["execAsap"])};d.Mason=function(g,h){this.element=d(h);this._create(g);this._init()};d.Mason.settings={isResizable:true,isAnimated:false,animationOptions:{queue:false,duration:500},gutterWidth:0,isRTL:false,isFitWidth:false,containerStyle:{position:"relative"}};d.Mason.prototype={_filterFindBricks:function(h){var g=this.options.itemSelector;return !g?h:h.filter(g).add(h.find(g))},_getBricks:function(h){var g=this._filterFindBricks(h).css({position:"absolute"}).addClass("masonry-brick");return g},_create:function(j){this.options=d.extend(true,{},d.Mason.settings,j);this.styleQueue=[];var i=this.element[0].style;this.originalStyle={height:i.height||""};var k=this.options.containerStyle;for(var m in k){this.originalStyle[m]=i[m]||""}this.element.css(k);this.horizontalDirection=this.options.isRTL?"right":"left";var h=this.element.css("padding-"+this.horizontalDirection);var l=this.element.css("padding-top");this.offset={x:h?parseInt(h,10):0,y:l?parseInt(l,10):0};this.isFluid=this.options.columnWidth&&typeof this.options.columnWidth==="function";var g=this;setTimeout(function(){g.element.addClass("masonry")},0);if(this.options.isResizable){d(c).bind("smartresize.masonry",function(){g.resize()})}this.reloadItems()},_init:function(g){this._getColumns();this._reLayout(g)},option:function(g,h){if(d.isPlainObject(g)){this.options=d.extend(true,this.options,g)}},layout:function(o,p){for(var m=0,n=o.length;m<n;m++){this._placeBrick(o[m])}var g={};g.height=Math.max.apply(Math,this.colYs);if(this.options.isFitWidth){var k=0;m=this.cols;while(--m){if(this.colYs[m]!==0){break}k++}g.width=(this.cols-k)*this.columnWidth-this.options.gutterWidth}this.styleQueue.push({$el:this.element,style:g});var h=!this.isLaidOut?"css":(this.options.isAnimated?"animate":"css"),j=this.options.animationOptions;var l;for(m=0,n=this.styleQueue.length;m<n;m++){l=this.styleQueue[m];l.$el[h](l.style,j)}this.styleQueue=[];if(p){p.call(o)}this.isLaidOut=true},_getColumns:function(){var g=this.options.isFitWidth?this.element.parent():this.element,h=g.width();this.columnWidth=this.isFluid?this.options.columnWidth(h):this.options.columnWidth||this.$bricks.outerWidth(true)||h;this.columnWidth+=this.options.gutterWidth;this.cols=Math.floor((h+this.options.gutterWidth)/this.columnWidth);this.cols=Math.max(this.cols,1)},_placeBrick:function(p){var n=d(p),r,v,k,t,l;r=Math.ceil(n.outerWidth(true)/this.columnWidth);r=Math.min(r,this.cols);if(r===1){k=this.colYs}else{v=this.cols+1-r;k=[];for(l=0;l<v;l++){t=this.colYs.slice(l,l+r);k[l]=Math.max.apply(Math,t)}}var g=Math.min.apply(Math,k),u=0;for(var m=0,q=k.length;m<q;m++){if(k[m]===g){u=m;break}}var o={top:g+this.offset.y};o[this.horizontalDirection]=this.columnWidth*u+this.offset.x;this.styleQueue.push({$el:n,style:o});var s=g+n.outerHeight(true),h=this.cols+1-q;for(m=0;m<h;m++){this.colYs[u+m]=s}},resize:function(){var g=this.cols;this._getColumns();if(this.isFluid||this.cols!==g){this._reLayout()}},_reLayout:function(h){var g=this.cols;this.colYs=[];while(g--){this.colYs.push(0)}this.layout(this.$bricks,h)},reloadItems:function(){this.$bricks=this._getBricks(this.element.children())},reload:function(g){this.reloadItems();this._init(g)},appended:function(h,i,j){if(i){this._filterFindBricks(h).css({top:this.element.height()});var g=this;setTimeout(function(){g._appended(h,j)},1)}else{this._appended(h,j)}},_appended:function(g,i){var h=this._getBricks(g);this.$bricks=this.$bricks.add(h);this.layout(h,i)},remove:function(g){this.$bricks=this.$bricks.not(g);g.remove()},destroy:function(){this.$bricks.removeClass("masonry-brick").each(function(){this.style.position="";this.style.top="";this.style.left=""});var g=this.element[0].style;for(var h in this.originalStyle){g[h]=this.originalStyle[h]}this.element.unbind(".masonry").removeClass("masonry").removeData("masonry");d(c).unbind(".masonry")}};
;var f="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";d.fn.imagesLoaded=function(o){var l=this,q=d.isFunction(d.Deferred)?d.Deferred():0,p=d.isFunction(q.notify),i=l.find("img").add(l.filter("img")),j=[],n=[],k=[];if(d.isPlainObject(o)){d.each(o,function(r,s){if(r==="callback"){o=s}else{if(q){q[r](s)}}})}function m(){var r=d(n),s=d(k);if(q){if(k.length){q.reject(i,r,s)}else{q.resolve(i)}}if(d.isFunction(o)){o.call(l,i,r,s)}}function h(r){g(r.target,r.type==="error")}function g(r,s){if(r.src===f||d.inArray(r,j)!==-1){return}j.push(r);if(s){k.push(r)}else{n.push(r)}d.data(r,"imagesLoaded",{isBroken:s,src:r.src});if(p){q.notifyWith(d(r),[s,i,d(n),d(k)])}if(i.length===j.length){setTimeout(m);i.unbind(".imagesLoaded",h)}}if(!i.length){m()}else{i.bind("load.imagesLoaded error.imagesLoaded",h).each(function(r,t){var u=t.src;var s=d.data(t,"imagesLoaded");if(s&&s.src===u){g(t,s.isBroken);return}if(t.complete&&t.naturalWidth!==e){g(t,t.naturalWidth===0||t.naturalHeight===0);return}if(t.readyState||t.complete){t.src=f;t.src=u}})}return q?q.promise(l):l};d.fn.masonry=function(h){if(typeof h==="string"){var g=Array.prototype.slice.call(arguments,1);this.each(function(){var i=d.data(this,"masonry");if(!i){logError("cannot call methods on masonry prior to initialization; attempted to call method '"+h+"'");return}if(!d.isFunction(i[h])||h.charAt(0)==="_"){logError("no such method '"+h+"' for masonry instance");return}i[h].apply(i,g)})}else{this.each(function(){var i=d.data(this,"masonry");if(i){i.option(h||{});i._init()}else{d.data(this,"masonry",new d.Mason(h,this))}})}return this}})(window,jQuery);